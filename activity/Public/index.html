<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Virtual Art Gallery â€” Home</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/css/site.css" />
</head>
<body>
  <!-- placeholders where partials will be injected -->
  <header id="site-header"></header>

  <main id="main" class="container">
    <h1>Welcome to the Virtual Art Gallery</h1>
    <p>Explore artwork and add pieces to your cart.</p>
  </main>

  <footer id="site-footer"></footer>

  <script type="module">
    import { loadHeaderFooter } from './js/utils.mjs';
    // if your partials path is different from ./partials/ adjust the basePath param
    await loadHeaderFooter('./partials/');
    // listen for cart updates to reflect in the header cart count
    window.addEventListener('cart-updated', () => {
      // re-run header-footer loader's internal update (we call the internal update by reloading header)
      // Quick approach: update cart-count span directly
      try {
        const raw = localStorage.getItem('cart');
        const cart = raw ? JSON.parse(raw) : [];
        const count = Array.isArray(cart) ? cart.reduce((acc, it) => acc + (it.quantity || 1), 0) : 0;
        const el = document.getElementById('cart-count');
        if (el) el.textContent = count;
      } catch (e) {
        console.warn(e);
      }
    });
  </script>
</body>
</html>